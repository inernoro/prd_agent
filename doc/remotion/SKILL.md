# Remotion Skill

## 1. 描述

本 Skill 旨在让 AI 掌握使用 Remotion (一个基于 React 的视频创建框架) 的能力。AI 将能够理解 Remotion 的核心概念、API 和工作流程,并指导用户完成从项目设置到视频渲染的整个过程,包括解答关于许可证、集成和最佳实践的问题。

## 2. 核心能力

- **项目初始化与集成**: 指导用户创建新的 Remotion 项目或将其集成到现有的 React 应用中。
- **视频组件开发**: 解释如何使用 React 组件、Hooks 和 Remotion API 来创建动画和视频场景。
- **参数化与动态视频**: 指导用户如何通过 props 和外部数据源创建动态和个性化的视频。
- **渲染与部署**: 解释不同的渲染策略(本地、服务器端、无服务器)及其部署方法。
- **许可证咨询**: 根据用户的团队规模和使用场景,提供关于使用免费版还是购买商业版的建议。
- **最佳实践与方法论**: 提供基于成功案例的架构模式和开发工作流建议。

## 3. 核心概念与术语

- **Composition**: 视频的顶层组件,定义了视频的尺寸、时长和帧率。
- **Sequence**: 一个容器组件,用于控制其子组件的播放时间和顺序。
- **`useCurrentFrame()`**: 一个 React Hook,返回当前渲染的帧数,是创建动画的核心。
- **`interpolate()`**: 一个函数,用于将帧数映射到动画值(例如,透明度、位置)。
- **Remotion Studio**: 一个本地开发服务器和可视化预览工具,用于实时查看和调试视频。
- **Remotion Player**: 一个 React 组件,用于在 Web 应用中嵌入和播放 Remotion 视频。
- **Server-Side Rendering (SSR)**: 使用 Node.js 在服务器上渲染视频,适用于批量生成。
- **Serverless Rendering**: 使用 `@remotion/lambda` 在 AWS Lambda 上进行大规模并行渲染。

## 4. 工作流程与方法论

当用户想要使用 Remotion 创建视频时,应遵循以下方法论:

### 阶段一: 需求分析与规划 (Conceptualization)

1.  **明确视频目标**: 确定视频的核心信息、风格和目标受众。
2.  **定义动态元素**: 识别视频中需要参数化或由数据驱动的部分(例如,用户名、数据图表、图片)。
3.  **选择集成策略**: 根据项目需求决定是创建新项目还是集成到现有应用。
4.  **许可证评估**: 根据团队规模和商业模式,确定所需的许可证类型。

### 阶段二: 项目设置与开发 (Development)

1.  **初始化项目**: 使用 `npx create-video@latest` 创建新项目,或按照官方文档将其集成到现有项目中。
2.  **创建视频组件**: 将视频分解为可重用的 React 组件。每个视觉元素或场景都应该是一个组件。
3.  **实现动画**: 使用 `useCurrentFrame` 和 `interpolate` 来驱动动画。对于复杂的动画,使用 `spring` 或 `Easing`。
4.  **参数化**: 使用 `getInputProps` 来接收外部数据,使视频内容动态化。
5.  **组织场景**: 使用 `<Sequence>` 和 `<Series>` 来编排不同场景的播放顺序和时间。
6.  **预览与调试**: 持续使用 Remotion Studio 进行实时预览和调试。

### 阶段三: 渲染与部署 (Rendering & Deployment)

1.  **选择渲染策略**:
    *   **本地渲染**: 用于快速测试和少量视频。命令: `npx remotion render`
    *   **服务器端渲染**: 用于自动化和批量生成。设置一个 Node.js 服务器,使用 `@remotion/renderer`。
    *   **无服务器渲染**: 用于大规模、高并发的场景。使用 `@remotion/lambda` 部署到 AWS Lambda。
2.  **性能优化**: 根据官方性能指南优化渲染速度,例如缓存计算结果、优化媒体文件等。
3.  **部署**: 如果是 SSR 或无服务器渲染,将渲染服务部署到云平台。

### 阶段四: 集成与交付 (Integration & Delivery)

1.  **嵌入播放器**: 如果需要在 Web 应用中展示视频,使用 `<Player>` 组件。
2.  **交付视频文件**: 将渲染好的 MP4 文件提供给用户或存储在云存储中。

## 5. 关键 API 和包

| 包/API | 用途 |
|---|---|
| `remotion` | 包含核心 API,如 `Composition`, `Sequence`, `useCurrentFrame`, `interpolate`。 |
| `@remotion/cli` | 命令行工具,用于创建项目、启动 Studio、渲染视频。 |
| `@remotion/player` | 在 React 应用中嵌入视频播放器。 |
| `@remotion/renderer` | 在 Node.js 环境中进行服务器端渲染。 |
| `@remotion/lambda` | 在 AWS Lambda 上进行无服务器渲染。 |
| `@remotion/media-utils` | 获取媒体文件的元数据(时长、尺寸等)。 |
| `@remotion/zod-types` | 使用 Zod 定义输入 props 的 schema,自动在 Studio 中生成 UI。 |
| `@remotion/transitions` | 提供预制的场景过渡效果。 |
| `@remotion/three` | 集成 Three.js,用于创建 3D 视频。 |

## 6. 集成模式最佳实践

### 模式 A: 独立的视频生成服务

- **架构**: 一个独立的 Node.js 或无服务器应用,接收 API 请求,渲染视频并返回视频 URL。
- **适用场景**: 批量生成个性化视频(如年度回顾)、数据可视化视频。
- **案例**: GitHub Unwrapped, YARX 马拉松视频。

### 模式 B: 作为现有产品的功能扩展

- **架构**: 在现有的 Web 应用中集成 Remotion,通常作为一项导出功能。
- **适用场景**: 允许用户将现有内容(如 Web Stories, 设计)导出为视频格式。
- **案例**: MakeStories (将 Web Stories 导出为 MP4)。

### 模式 C: AI 驱动的视频创作平台

- **架构**: 一个 SaaS 平台,用户通过 UI 或文本提示来创建视频,后端使用 Remotion 进行渲染。
- **适用场景**: 面向无编程背景用户的视频创作工具。
- **案例**: Submagic, Revid.ai, HeyGen。

## 7. 提示词模板 (Prompt Template)

这是一个用于指导 AI 使用此 Skill 的提示词模板:

```
你现在是一名 Remotion 专家。请使用你掌握的 Remotion Skill,帮助我完成以下任务:

**项目目标:**
[清晰地描述你想要创建的视频,例如:"我想为我的 GitHub 年度报告创建一个 15 秒的动画视频,展示我的代码提交次数和最活跃的仓库。"]

**视频的关键场景:**
1.  [场景一描述,例如:"开场,一个标题动画,显示'我的2025 GitHub 年度报告'"]
2.  [场景二描述,例如:"一个条形图动画,展示每个月的代码提交量"]
3.  [场景三描述,例如:"显示我最活跃的三个仓库的 logo 和名称"]
4.  [场景四描述,例如:"结尾,显示我的 GitHub 头像和用户名"]

**需要动态化的数据 (输入 Props):**
- 用户名: `{{username}}`
- 头像 URL: `{{avatarUrl}}`
- 每月提交数据: `{{commitData}}` (例如: `[10, 25, 15, ...]`) 
- 活跃仓库列表: `{{topRepos}}` (例如: `[{name: 'remotion', logo: 'url'}, ...]`) 

**我的技术背景和环境:**
[描述你的情况,例如:"我是一个熟悉 React 的开发者,这是我第一次使用 Remotion。我希望创建一个新的独立项目。"]

**请为我提供:**
1.  一个详细的、分步的行动计划,从项目设置开始。
2.  关键视频组件的代码示例。
3.  关于如何组织项目文件结构的建议。
4.  最终如何渲染视频的说明。
```
