# MAP 定位与智能体能力构建共识稿

> **文档类型**：内部共识备忘录
> **版本**：v1.0
> **日期**：2026-02-14
> **参与人**：产品团队
> **状态**：初稿待确认

---

## 背景

经过两个下午的集中讨论，团队就 MAP 平台的战略定位、智能体能力建设路径以及组织推广策略达成了初步共识。本文档将这三项共识固化为可传播、可执行的文字，便于在更大范围内对齐认知。

---

## 一、MAP 的定位：基于 SSO 的智能体总控平台

### 1.1 MAP 是什么

**MAP = Mido Agent Platform（米多智能体平台）**。

MAP 不是又一个后台管理系统，而是一个**以智能体为核心能力、以 SSO 为身份底座、以 MCP 为连接协议**的企业级总控平台。

### 1.2 为什么需要 MAP

当前公司的后台系统呈碎片化分布：

| 系统 | 定位 | 问题 |
|------|------|------|
| BDE 后台 | 业务运营管理 | 独立账号体系，无 AI 能力 |
| 总后台 | 内部管理工具 | 仅限公司内部，功能固化 |
| 第三方后台 | 各供应商管理面板 | 账号割裂，数据孤岛 |

这些系统存在三个结构性缺陷：

1. **身份割裂** —— 每个平台独立登录，无统一身份治理
2. **能力孤立** —— 平台之间无法联动，一件事需要跨多个系统手动操作
3. **智能缺失** —— 所有操作依赖人工点击，无 AI 辅助能力

### 1.3 MAP 的三层定位

```
┌─────────────────────────────────────────────────┐
│  第一层：统一身份入口                              │
│  SSO 单点登录 → 一次认证，访问所有平台              │
├─────────────────────────────────────────────────┤
│  第二层：智能体工作台                              │
│  多个专业 Agent → 覆盖产品/设计/研发/测试/管理全链路  │
├─────────────────────────────────────────────────┤
│  第三层：跨系统控制中枢                             │
│  MCP 协议 + Agent 调度 → 通过自然语言操控其他平台     │
└─────────────────────────────────────────────────┘
```

**第一层：统一身份入口（SSO）**

- 基于 SSO 实现一次登录、全平台通行
- 用户无需记忆多套账号密码
- 为权限管控、审计追踪提供统一身份基础

**第二层：智能体工作台（Agent Workspace）**

- 内置多个专业智能体，覆盖日常工作场景
- 每个 Agent 具备独立的大模型绑定、技能集、知识库（详见第二章）
- 用户根据角色和场景选择 Agent，获得专业级 AI 辅助

**第三层：跨系统控制中枢（MCP Hub）**

- 通过 MCP（Model Context Protocol）协议连接外部系统
- Agent 可代替用户完成跨系统操作（查数据、提工单、发通知）
- 从"人操作系统"进化为"人指挥 Agent 操作系统"

### 1.4 MAP 与现有系统的关系

MAP 不替代现有系统，而是成为它们的**智能前端**：

```
用户 → MAP（统一入口）→ SSO 认证
                      → Agent 理解意图
                      → MCP 调用 BDE 后台 / 总后台 / 第三方系统
                      → 结果聚合展示
```

现有系统继续承担数据存储和业务逻辑职责，MAP 负责**智能调度和交互体验**。

---

## 二、智能体能力构建的三要素：LLM + Skill + RAG

### 2.1 核心观点

> **一个合格的智能体，至少要具备三个组成部分：大模型（LLM）、技能（Skill）、知识库（RAG）。**
> 这是智能体的"下限"——没有这个基础结构，Agent 就不是真正的 Agent，只是一个套壳的聊天窗口。

这个认知与业界主流 Agent 平台（Dify、Coze、FastGPT、百度千帆）的架构完全一致。三要素的关系如下：

```
              ┌─────────────────┐
              │   智能体 Agent   │
              │   (统一身份)     │
              └────────┬────────┘
         ┌─────────────┼─────────────┐
         ▼             ▼             ▼
   ┌──────────┐  ┌──────────┐  ┌──────────┐
   │  大模型   │  │   技能   │  │  知识库   │
   │  (LLM)   │  │ (Skill)  │  │  (RAG)   │
   │          │  │          │  │          │
   │ 思考引擎  │  │ 行动能力  │  │ 记忆系统  │
   │ "大脑"   │  │ "双手"   │  │ "经验"   │
   └──────────┘  └──────────┘  └──────────┘
```

### 2.2 三要素的定义与职责

#### 大模型（LLM）—— 思考引擎

大模型是智能体的"大脑"，决定了 Agent 的理解能力、推理能力和表达能力。

| 维度 | 说明 |
|------|------|
| **职责** | 理解用户意图、推理分析、生成内容 |
| **关键能力** | 上下文理解、逻辑推理、多轮对话、多模态处理 |
| **差异化** | 不同 Agent 可绑定不同模型（GPT-4o 用于复杂推理，Gemini 用于多模态，轻量模型用于意图识别） |

**当前实现状态**：✅ 完备

MAP 已具备成熟的 LLM 管理体系：
- **LLM Gateway**：统一调度接口，所有模型调用通过 Gateway 路由
- **AppCallerCode 机制**：每个 Agent 的每个功能绑定独立的模型调用标识（如 `prd-agent.chat::chat`）
- **模型池策略引擎**：6 种调度策略（顺序/轮询/加权随机/最低延迟/竞速/快速失败），支持自动健康管理
- **三级模型调度**：专属池 → 默认池 → 兜底配置，确保服务可用性
- **多平台适配**：OpenAI、Claude、Gemini 等主流平台统一接入

#### 技能（Skill）—— 行动能力

技能是智能体的"双手"，决定了 Agent 能做什么事、怎么做事。

| 维度 | 说明 |
|------|------|
| **职责** | 将通用 LLM 能力转化为具体的、可操作的工作流 |
| **关键能力** | 预定义提示词模板、参数化输入、工具链调用、格式化输出 |
| **差异化** | 不同 Agent 配备不同技能集（PRD Agent 有"需求分析"技能，缺陷 Agent 有"缺陷提取"技能） |

**当前实现状态**：✅ 基础完备，需加强 Agent 显式绑定

已有能力：
- **统一技能模型**：输入配置（上下文范围、参数）、执行配置（Prompt 模板、模型路由）、输出配置（对话/下载/剪贴板）
- **三级可见性**：系统技能（管理员维护）、公共技能（全员可用）、个人技能（用户自建）
- **角色过滤**：技能可按 PM/DEV/QA 角色筛选展示
- **海鲜市场**：技能可发布到配置市场，支持 Fork 复用

待补强：
- 技能与 Agent 之间缺少**显式绑定关系**（当前是隐式关联，所有 Agent 看到相同技能列表）
- 需要在技能模型上增加 `AgentKey` 字段，实现"PRD Agent 有 PRD 技能，视觉 Agent 有图像技能"

#### 知识库（RAG）—— 记忆系统

知识库是智能体的"经验"，决定了 Agent 知道什么、记住什么。

| 维度 | 说明 |
|------|------|
| **职责** | 为 Agent 提供领域专属知识，使回答基于事实而非臆测 |
| **关键能力** | 文档存储、内容检索、上下文注入、知识更新 |
| **差异化** | 不同 Agent 关联不同知识库（PRD Agent 关联产品文档，缺陷 Agent 关联测试用例库） |

**当前实现状态**：❌ 缺失，需要从零构建

目前仅有的相关能力：
- PRD 文档可以作为对话上下文加载（整篇缓存注入，非 RAG 方式）
- 附件上传通道已通（图片/文件上传到 S3 存储）
- 桌面端有"知识库"页面占位，但无实际功能

需要构建的最小能力：
- 知识库元数据管理（创建/命名/关联 Agent）
- 文档上传与存储（复用已有附件通道）
- 内容注入机制（Skill 执行时自动引用关联知识库的文档）
- 后续可升级为向量检索（Embedding + 语义搜索）

### 2.3 三要素的协同关系

以"用户问：这个 PRD 的接口设计合理吗？"为例：

```
用户提问
  │
  ▼
① 知识库（RAG）：检索该 PRD 相关的接口文档、历史评审记录
  │
  ▼
② 技能（Skill）：激活"接口评审"技能，注入评审模板和评审标准
  │
  ▼
③ 大模型（LLM）：结合知识 + 技能模板，进行推理并生成评审意见
  │
  ▼
输出：结构化的接口评审报告
```

三者缺一不可：
- **没有 LLM**：无法理解和推理
- **没有 Skill**：有能力但不知道该做什么、怎么做
- **没有 RAG**：空有推理能力，但缺乏事实依据，容易产生幻觉

### 2.4 当前差距与补齐计划

| 要素 | 当前状态 | 差距 | 补齐优先级 |
|------|----------|------|-----------|
| LLM | ✅ 完备 | — | 维护 |
| Skill | ✅ 基础完备 | Agent ↔ Skill 显式绑定 | P1（1 周内） |
| RAG | ❌ 缺失 | 知识库模型 + 文档管理 + 上下文注入 | P0（2 周内） |

补齐策略：**不追求一步到位的向量检索系统，先建立结构，再迭代增强**。

- **第一阶段（结构补全）**：Agent 定义中显式关联 Skill 列表和知识库列表，知识库支持文档上传和全文注入
- **第二阶段（能力增强）**：引入 Embedding 模型，实现语义检索，支持大规模文档知识库
- **第三阶段（智能进化）**：知识自动沉淀（对话中的高质量 QA 自动入库）、知识图谱、跨 Agent 知识共享

---

## 三、如何给公司同事一个必用的理由

### 3.1 核心策略：改变流程，调整入口

> **不是让同事"愿意用"，而是让 MAP 成为工作流的"必经之路"。**

最有效的推广不是宣传 AI 多强大，而是**将 MAP 嵌入现有工作流程的关键节点**，使其成为唯一入口或最优路径。

### 3.2 入口级场景设计

#### 场景一：周报提交与查看

| 环节 | 当前流程 | MAP 流程 |
|------|----------|----------|
| 撰写 | 各自用文档/邮件写 | MAP 周报 Agent 辅助生成（自动汇总本周工作记录） |
| 提交 | 发邮件或贴到后台 | 通过 MAP 提交，自动归档 |
| 查看 | 总后台可看（只读） | 总后台保留只读视图，**编辑入口仅在 MAP** |
| 汇总 | 领导手动整理 | MAP 自动汇总团队周报，生成管理视图 |

**关键设计**：总后台的周报模块**只提供查看能力，不提供编写入口**。要写周报，必须通过 MAP。这不是限制，而是升级——MAP 的周报 Agent 能根据本周的提交记录、对话历史自动生成周报草稿，用户只需审核确认。

#### 场景二：需求评审与交底

| 环节 | 当前流程 | MAP 流程 |
|------|----------|----------|
| PRD 发布 | 飞书/邮件发文档链接 | PRD 上传到 MAP，AI 自动解析 |
| 需求理解 | 开会讲解，反复沟通 | 研发/测试在 MAP 上向 PRD Agent 提问 |
| 疑问跟踪 | 群里零散提问 | MAP 记录所有 QA，形成知识沉淀 |
| 评审报告 | 无 | MAP 自动生成需求完整性检测报告 |

**关键设计**：PRD 评审流程要求必须在 MAP 上完成 AI 完整性检测，检测报告作为评审会的前置材料。

#### 场景三：缺陷提交

| 环节 | 当前流程 | MAP 流程 |
|------|----------|----------|
| 发现 Bug | 截图 + 文字描述 | MAP 缺陷 Agent 引导结构化录入 |
| 分类定级 | 人工判断 | AI 自动建议严重程度和优先级 |
| 关联需求 | 手动查找 | 自动关联相关 PRD 章节 |
| 提交 | 到缺陷系统录入 | MAP 通过 MCP 自动同步到缺陷系统 |

#### 场景四：日常内容创作

| 环节 | 当前流程 | MAP 流程 |
|------|----------|----------|
| 写推广文案 | 自己写或找外包 | 文学 Agent 生成 + 配图 |
| 做产品图 | 找设计师排期 | 视觉 Agent 快速生成 |
| 写技术方案 | 从零开始写 | Agent 基于 PRD 自动生成方案框架 |

### 3.3 推广节奏

| 阶段 | 时间 | 目标 | 手段 |
|------|------|------|------|
| **种子期** | 第 1-2 周 | 核心团队（产品+研发）日常使用 | PRD 评审流程接入 MAP |
| **扩展期** | 第 3-4 周 | 全部门使用 | 周报入口迁移至 MAP |
| **普及期** | 第 5-8 周 | 全公司使用 | 缺陷提交 + 内容创作入口接入 |
| **深化期** | 第 9-12 周 | 深度依赖 | MCP 打通更多系统，Agent 覆盖更多场景 |

### 3.4 衡量指标

| 指标 | 定义 | 目标值 |
|------|------|--------|
| **DAU** | 日活跃用户数 | 种子期 ≥ 10，普及期 ≥ 50 |
| **AI 渗透率** | 使用 AI Agent 的用户 / 总用户 | ≥ 60% |
| **Agent 调用次数** | 每日 Agent 执行次数 | 种子期 ≥ 30/天 |
| **流程覆盖率** | 通过 MAP 完成的流程 / 总流程 | ≥ 3 个核心流程 |
| **满意度** | 用户反馈评分（1-5） | ≥ 4.0 |

---

## 四、行动项

### 4.1 技术侧

| 事项 | 负责方 | 优先级 | 预计周期 |
|------|--------|--------|----------|
| Agent 三要素框架落地（显式绑定 LLM/Skill/RAG） | 研发 | P0 | 2 周 |
| 知识库最小可用版本（文档管理 + 上下文注入） | 研发 | P0 | 2 周 |
| SSO 方案调研与选型 | 研发 | P1 | 1 周 |
| MCP 协议适配（第一个外部系统打通） | 研发 | P1 | 2 周 |
| 周报 Agent 原型 | 研发 | P1 | 1 周 |

### 4.2 产品侧

| 事项 | 负责方 | 优先级 | 预计周期 |
|------|--------|--------|----------|
| 确认首批接入 MAP 的流程（周报/评审/缺陷） | 产品 | P0 | 1 周 |
| 设计各流程在 MAP 中的用户体验 | 产品 | P0 | 1 周 |
| 制定推广计划和培训材料 | 产品 | P1 | 2 周 |

### 4.3 管理侧

| 事项 | 负责方 | 优先级 | 预计周期 |
|------|--------|--------|----------|
| 确认周报入口调整方案（总后台只读 + MAP 编写） | 管理层 | P0 | 本周 |
| 确认 PRD 评审流程接入 MAP 的时间节点 | 管理层 | P1 | 2 周内 |
| 发布全员通知，说明 MAP 定位和使用要求 | 管理层 | P1 | 推广期前 |

---

## 五、总结

MAP 的三个共识可以概括为：

1. **MAP 是什么** —— 不是一个新后台，是以 SSO 为底座、以智能体为核心、以 MCP 为触手的**企业 AI 总控平台**
2. **Agent 怎么建** —— 每个 Agent 必须具备 LLM（大脑）+ Skill（双手）+ RAG（经验）三要素，这是**下限**，不是上限
3. **怎么推** —— 不靠宣传靠流程，把 MAP 做成关键工作流的**唯一入口或最优路径**，让"不得不用"变成"离不开"

---

*本文档为内部共识备忘录，请相关人员确认后签字留存。*
