* { box-sizing: border-box; }

/* 注意：避免使用 color-mix()，部分浏览器/WebView 不支持 */
:focus-visible {
  outline: 2px solid rgba(99, 102, 241, 0.6);
  outline-offset: 2px;
}

/* 禁用 focus 样式的元素（用于自定义聚焦容器的内部元素） */
.no-focus-ring:focus,
.no-focus-ring:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

/* Admin 通用输入控件：柔和边框 + 半透明暗底 + 统一交互态 */
.prd-field {
  background: rgba(255, 255, 255, 0.05);
  color: var(--text-primary);
  border: 1px solid rgba(255, 255, 255, 0.12);
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.03) inset;
  caret-color: rgba(129, 140, 248, 0.85);
  transition: border-color 140ms ease, box-shadow 140ms ease, background 140ms ease;
}

.prd-field::placeholder {
  color: var(--text-muted);
  opacity: 0.72;
}

.prd-field:hover {
  border-color: rgba(255, 255, 255, 0.16);
}

.prd-field:focus {
  border-color: rgba(99, 102, 241, 0.4);
  box-shadow:
    0 0 0 3px rgba(99, 102, 241, 0.12),
    0 1px 0 rgba(255, 255, 255, 0.03) inset;
}

.prd-field:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* 原生下拉框可读性（Windows/Edge 常见：暗色页面 + 白底下拉导致白字看不清） */
select {
  color-scheme: dark;
}

/* 让 option/optgroup 尽量随 color-scheme 自适应（Canvas/CanvasText 会随暗色方案变化） */
select option,
select optgroup {
  color: CanvasText;
  background-color: Canvas;
}

/* 兼容：极少数不支持 Canvas/CanvasText 的环境 */
@supports not (color: CanvasText) {
  select option,
  select optgroup {
    color: #111;
    background-color: #fff;
  }
}

::-webkit-scrollbar { width: 10px; height: 10px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.10);
  border-radius: 9999px;
  border: 3px solid transparent;
  background-clip: content-box;
}
::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.18); background-clip: content-box; }

/* 侧边栏导航：隐藏滚动条但保留滚动功能 */
.nav-scroll-hidden {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge */
}
.nav-scroll-hidden::-webkit-scrollbar {
  display: none; /* Chrome/Safari/Opera */
}

/* 侧边栏导航项：hover 效果（纯 CSS，避免 JS 残影） */
.nav-item-hover:hover {
  background: rgba(99, 102, 241, 0.06) !important;
  border-color: rgba(99, 102, 241, 0.15) !important;
  box-shadow: 0 4px 16px rgba(0,0,0,0.25), 0 0 0 1px rgba(99, 102, 241, 0.08) inset;
}

/* 图片上传：海浪透明遮罩（用于 syncStatus=pending 的画布图片） */
@keyframes prdUploadWaveMove {
  0% { transform: translateX(-28%); opacity: 0.55; }
  50% { opacity: 0.85; }
  100% { transform: translateX(28%); opacity: 0.55; }
}

.prd-upload-wave {
  position: relative;
  overflow: hidden;
}

.prd-upload-wave::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  /* 一层极轻的冷色雾，避免遮挡图片细节 */
  background: linear-gradient(180deg, rgba(59, 130, 246, 0.10) 0%, rgba(59, 130, 246, 0.04) 55%, rgba(59, 130, 246, 0.08) 100%);
  mix-blend-mode: screen;
  opacity: 0.55;
}

.prd-upload-wave::after {
  content: '';
  position: absolute;
  inset: -18% -36%;
  pointer-events: none;
  /* “海浪”主体：多层波峰叠加 + 扫过 */
  background:
    radial-gradient(40px 18px at 10% 68%, rgba(255,255,255,0.14) 0 62%, transparent 64%),
    radial-gradient(44px 20px at 26% 72%, rgba(255,255,255,0.12) 0 62%, transparent 64%),
    radial-gradient(46px 22px at 42% 69%, rgba(255,255,255,0.10) 0 62%, transparent 64%),
    radial-gradient(44px 20px at 58% 73%, rgba(255,255,255,0.12) 0 62%, transparent 64%),
    radial-gradient(40px 18px at 74% 70%, rgba(255,255,255,0.14) 0 62%, transparent 64%),
    radial-gradient(44px 20px at 90% 74%, rgba(255,255,255,0.10) 0 62%, transparent 64%),
    linear-gradient(90deg, rgba(59,130,246,0.00) 0%, rgba(59,130,246,0.10) 45%, rgba(59,130,246,0.00) 100%);
  filter: blur(0.2px);
  opacity: 0.70;
  animation: prdUploadWaveMove 1.15s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .prd-upload-wave::after { animation: none !important; }
}

/* 主模型选中：轻量瞬时动效（行闪一下 + 星标弹一下） */
@keyframes mainRowSweepRtl {
  0% { transform: translateX(110%); opacity: 0; }
  12% { opacity: 1; }
  65% { opacity: 1; }
  100% { transform: translateX(-110%); opacity: 0; }
}

/* 扫光到一半后才开始“染色”文字，制造变金的错觉 */
@keyframes mainRowTintKickIn {
  0% { opacity: 0; }
  49% { opacity: 0; }
  50% { opacity: 0.92; }
  82% { opacity: 0.92; }
  100% { opacity: 0; }
}

/* 文字：在扫光过半（50% ≈ 260ms）后变金，再恢复 */
@keyframes mainRowTextGold {
  0% { color: var(--main-row-text-from); }
  49% { color: var(--main-row-text-from); }
  50% { color: rgba(250, 204, 21, 0.95); }
  82% { color: rgba(250, 204, 21, 0.95); }
  100% { color: var(--main-row-text-from); }
}

@keyframes mainStarPop {
  0% { transform: scale(0.88) rotate(-10deg); filter: drop-shadow(0 0 0 rgba(250, 204, 21, 0)); }
  55% { transform: scale(1.18) rotate(0deg); filter: drop-shadow(0 6px 10px rgba(250, 204, 21, 0.22)); }
  100% { transform: scale(1) rotate(0deg); filter: drop-shadow(0 0 0 rgba(250, 204, 21, 0)); }
}

.main-row-flash {
  position: relative;
  overflow: hidden;
  isolation: isolate;
}

.main-row-flash::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  /* 一条窄一些的黄光带，从右往左扫过 */
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(250, 204, 21, 0.00) 35%,
    rgba(250, 204, 21, 0.18) 50%,
    rgba(250, 204, 21, 0.10) 58%,
    rgba(250, 204, 21, 0.00) 70%,
    transparent 100%
  );
  filter: blur(0.2px);
  transform: translateX(110%);
  animation: mainRowSweepRtl 520ms ease-out 1;
}

.main-row-flash::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  /* 叠在内容之上，用混合模式把文字“染成金色” */
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(250, 204, 21, 0.00) 35%,
    rgba(250, 204, 21, 0.90) 50%,
    rgba(250, 204, 21, 0.55) 58%,
    rgba(250, 204, 21, 0.00) 70%,
    transparent 100%
  );
  mix-blend-mode: color;
  transform: translateX(110%);
  animation:
    mainRowSweepRtl 520ms ease-out 1,
    mainRowTintKickIn 520ms ease-out 1;
}

/* 针对本行里用 inline style 指定颜色的文本，附加一个颜色动画（动画层级可覆盖 inline style） */
.main-row-flash [style*="var(--text-primary)"] { --main-row-text-from: var(--text-primary); animation: mainRowTextGold 520ms ease-out 1; }
.main-row-flash [style*="var(--text-secondary)"] { --main-row-text-from: var(--text-secondary); animation: mainRowTextGold 520ms ease-out 1; }
.main-row-flash [style*="var(--text-muted)"] { --main-row-text-from: var(--text-muted); animation: mainRowTextGold 520ms ease-out 1; }

.main-star-pop {
  transform-origin: 50% 50%;
  animation: mainStarPop 420ms cubic-bezier(0.2, 0.9, 0.2, 1) 1;
}

/* 测试按钮动效 */
@keyframes testBtnOkPop {
  0% { transform: scale(1); }
  30% { transform: scale(1.08); }
  60% { transform: scale(0.97); }
  100% { transform: scale(1); }
}

.test-btn-ok {
  animation: testBtnOkPop 320ms ease-out 1;
}

.test-btn-loading {
  position: relative;
  overflow: hidden;
}

.test-btn-loading::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.00) 35%,
    rgba(255, 255, 255, 0.08) 50%,
    rgba(255, 255, 255, 0.00) 65%,
    transparent 100%
  );
  animation: mainRowSweepRtl 1.1s ease-in-out infinite;
}

/* LLM Logs：Answer JSON 检查动效（仅对特定 class 生效，避免影响其它按钮/内容） */
@keyframes llmJsonScanTtb {
  0% { transform: translateY(-110%); opacity: 0; }
  12% { opacity: 1; }
  65% { opacity: 1; }
  100% { transform: translateY(110%); opacity: 0; }
}

@keyframes llmJsonScanTintKickIn {
  0% { opacity: 0; }
  49% { opacity: 0; }
  50% { opacity: 0.92; }
  82% { opacity: 0.92; }
  100% { opacity: 0; }
}

.llm-json-scanBox {
  position: relative;
  overflow: hidden;
  isolation: isolate;
}

.llm-json-scanBox.llm-json-scanBox--failed {
  border-color: rgba(239, 68, 68, 0.32) !important;
  background: linear-gradient(180deg, rgba(239, 68, 68, 0.06) 0%, rgba(0,0,0,0.22) 42%) !important;
}

.llm-json-scanBox.llm-json-scanBox--failed .prd-md {
  color: rgba(239, 68, 68, 0.92) !important;
}

.llm-json-scanBox.llm-json-scanBox--passed {
  border-color: rgba(34, 197, 94, 0.30) !important;
  background: linear-gradient(180deg, rgba(34, 197, 94, 0.05) 0%, rgba(0,0,0,0.22) 44%) !important;
}

.llm-json-scanBox.llm-json-scanBox--passed .prd-md {
  color: rgba(34, 197, 94, 0.92) !important;
}

.llm-json-scanBox.llm-json-scanBox--scanning::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(
    180deg,
    transparent 0%,
    rgba(250, 204, 21, 0.00) 35%,
    rgba(250, 204, 21, 0.22) 50%,
    rgba(250, 204, 21, 0.10) 60%,
    rgba(250, 204, 21, 0.00) 72%,
    transparent 100%
  );
  transform: translateY(-110%);
  animation: llmJsonScanTtb 680ms ease-out 1;
}

.llm-json-scanBox.llm-json-scanBox--scanning::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(
    180deg,
    transparent 0%,
    rgba(250, 204, 21, 0.00) 35%,
    rgba(250, 204, 21, 0.90) 50%,
    rgba(250, 204, 21, 0.55) 60%,
    rgba(250, 204, 21, 0.00) 72%,
    transparent 100%
  );
  mix-blend-mode: color;
  transform: translateY(-110%);
  animation: llmJsonScanTtb 680ms ease-out 1, llmJsonScanTintKickIn 680ms ease-out 1;
}

.llm-json-btn-loading {
  position: relative;
  overflow: hidden;
}

.llm-json-btn-loading::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(250, 204, 21, 0.00) 35%,
    rgba(250, 204, 21, 0.14) 50%,
    rgba(250, 204, 21, 0.00) 65%,
    transparent 100%
  );
  animation: mainRowSweepRtl 680ms ease-out 1;
}

.llm-json-btn-ok {
  animation: testBtnOkPop 320ms ease-out 1;
}

.sa-btn.llm-json-sa-failed::before {
  background: rgba(239, 68, 68, 0.10) !important;
  border-color: rgba(239, 68, 68, 0.28) !important;
}

.sa-btn.llm-json-sa-failed:hover::before {
  background: rgba(239, 68, 68, 0.14) !important;
  border-color: rgba(239, 68, 68, 0.34) !important;
}

.sa-btn.llm-json-sa-failed,
.sa-btn.llm-json-sa-failed .sa-message,
.sa-btn.llm-json-sa-failed .sa-button-text span,
.sa-btn.llm-json-sa-failed .sa-icon {
  color: rgba(239, 68, 68, 0.95) !important;
}

.sa-btn.llm-json-sa-passed::before {
  background: rgba(34, 197, 94, 0.10) !important;
  border-color: rgba(34, 197, 94, 0.28) !important;
}

.sa-btn.llm-json-sa-passed:hover::before {
  background: rgba(34, 197, 94, 0.14) !important;
  border-color: rgba(34, 197, 94, 0.34) !important;
}

.sa-btn.llm-json-sa-passed,
.sa-btn.llm-json-sa-passed .sa-message,
.sa-btn.llm-json-sa-passed .sa-button-text span,
.sa-btn.llm-json-sa-passed .sa-icon {
  color: rgba(34, 197, 94, 0.95) !important;
}

@media (prefers-reduced-motion: reduce) {
  .llm-json-scanBox.llm-json-scanBox--scanning::before,
  .llm-json-scanBox.llm-json-scanBox--scanning::after,
  .llm-json-btn-loading::after,
  .llm-json-btn-ok {
    animation: none !important;
  }
}

/* Radix Dialog：从小到大弹出（用于“背景停 -> 弹窗出场”的顺序感） */
@keyframes prdDialogOverlayIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes prdDialogContentIn {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.92); }
  65% { opacity: 1; transform: translate(-50%, -50%) scale(1.02); }
  100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

.prd-dialog-content {
  /* 固定定位基准，避免与 Tailwind translate/transform 变量冲突导致错位 */
  transform: translate(-50%, -50%);
  transform-origin: center;
  will-change: transform, opacity;
}

.prd-dialog-overlay[data-state="open"] {
  animation: prdDialogOverlayIn 200ms ease-out both;
}

.prd-dialog-content[data-state="open"] {
  animation: prdDialogContentIn 260ms cubic-bezier(0.2, 0.9, 0.2, 1) both;
}

@media (prefers-reduced-motion: reduce) {
  .prd-dialog-overlay[data-state="open"],
  .prd-dialog-content[data-state="open"] {
    animation: none !important;
  }
}

/* 模型地图（六芒星）：几何描边 + 节点依次点亮（避免五角星审美问题） */
@keyframes modelMapLineDraw {
  0% { stroke-dashoffset: 280; opacity: 0; }
  12% { opacity: 1; }
  100% { stroke-dashoffset: 0; opacity: 1; }
}

@keyframes modelMapLineGlow {
  0%, 100% { opacity: 1; filter: drop-shadow(0 10px 22px rgba(0,0,0,0.45)); }
  50% { opacity: 1; filter: drop-shadow(0 16px 32px rgba(99, 102, 241, 0.26)); }
}

@keyframes modelMapNodeIn {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.92); filter: drop-shadow(0 0 0 rgba(0,0,0,0)); }
  65% { opacity: 1; transform: translate(-50%, -50%) scale(1.02); filter: drop-shadow(0 10px 18px rgba(0,0,0,0.35)); }
  100% { opacity: 1; transform: translate(-50%, -50%) scale(1); filter: drop-shadow(0 10px 18px rgba(0,0,0,0.35)); }
}

@keyframes modelMapCenterIn {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.98); }
  100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

@keyframes modelMapDotBreath {
  0%, 100% { transform: scale(1); filter: drop-shadow(0 0 10px rgba(255,255,255,0.06)); opacity: 0.92; }
  50% { transform: scale(1.08); filter: drop-shadow(0 0 18px rgba(255,255,255,0.14)); opacity: 1; }
}

.model-map-stage {
  position: relative;
  border-radius: 18px;
  border: 1px solid var(--border-subtle);
  background:
    radial-gradient(520px 360px at 50% 46%, rgba(250, 204, 21, 0.07) 0%, rgba(255,255,255,0.02) 44%, rgba(0,0,0,0) 74%),
    radial-gradient(560px 420px at 50% 58%, rgba(59, 130, 246, 0.055) 0%, rgba(0,0,0,0) 72%),
    radial-gradient(900px 700px at 50% 50%, rgba(255,255,255,0.018) 0%, rgba(0,0,0,0) 68%),
    rgba(255,255,255,0.02);
  overflow: hidden;
}

.model-map-stage::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.55;
  background-image:
    radial-gradient(circle at 18px 22px, rgba(255,255,255,0.10) 0 1px, transparent 2px),
    radial-gradient(circle at 72px 64px, rgba(255,255,255,0.08) 0 1px, transparent 2px),
    radial-gradient(circle at 46px 92px, rgba(250,204,21,0.12) 0 1px, transparent 2px),
    radial-gradient(circle at 108px 36px, rgba(59,130,246,0.10) 0 1px, transparent 2px);
  background-size: 140px 140px;
  background-repeat: repeat;
  mix-blend-mode: screen;
  filter: blur(0.1px);
  animation: modelMapStarDrift 14s linear infinite;
}

.model-map-stage::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(closest-side at 50% 50%, rgba(0,0,0,0) 0%, rgba(0,0,0,0.32) 92%, rgba(0,0,0,0.42) 100%);
  opacity: 0.55;
}

@keyframes modelMapStarDrift {
  0% { transform: translate3d(0, 0, 0); }
  100% { transform: translate3d(-140px, -140px, 0); }
}

.model-map-frame {
  position: relative;
  width: min(560px, 100%);
  aspect-ratio: 1 / 1;
  margin: 0 auto;
  display: block;
}

.model-map-svg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  overflow: visible;
}

.model-map-line {
  fill: none;
  stroke: rgba(255,255,255,0.16);
  stroke-width: 1.35;
  stroke-linejoin: round;
  stroke-linecap: round;
  stroke-dasharray: 280;
  stroke-dashoffset: 280;
  filter: drop-shadow(0 10px 22px rgba(0,0,0,0.45));
}

.model-map-line.line-a {
  animation:
    modelMapLineDraw 980ms cubic-bezier(0.2, 0.9, 0.2, 1) 1 forwards,
    modelMapLineGlow 2.8s ease-in-out 1.0s infinite;
}

.model-map-line.line-b {
  animation:
    modelMapLineDraw 980ms cubic-bezier(0.2, 0.9, 0.2, 1) 1 forwards,
    modelMapLineGlow 2.8s ease-in-out 1.2s infinite;
  animation-delay: 160ms, 0ms;
}

.model-map-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: min(240px, 62%);
  padding: 12px 14px;
  border-radius: 16px;
  background: rgba(15, 15, 18, 1);
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 18px 60px rgba(0,0,0,0.42);
  opacity: 0;
  animation: modelMapCenterIn 520ms cubic-bezier(0.2, 0.9, 0.2, 1) 1 forwards;
  animation-delay: var(--mm-delay, 0ms);
}

.model-map-center-title {
  font-size: 12px;
  font-weight: 800;
  letter-spacing: 0.12em;
  color: rgba(255,255,255,0.72);
  text-transform: uppercase;
  margin-bottom: 8px;
}

.model-map-center-row {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
  font-size: 12px;
  color: rgba(255,255,255,0.72);
}

.model-map-center-row .k { color: rgba(255,255,255,0.45); font-weight: 700; }
.model-map-center-row .v { color: rgba(255,255,255,0.86); font-weight: 800; }

.model-map-node {
  position: absolute;
  /* 顶点对齐：node 本身不再 translate，避免被 chip 宽度“拖偏” */
}

.model-map-anchor {
  transform: translate(-50%, -50%);
  opacity: 0;
  animation: modelMapNodeIn 520ms cubic-bezier(0.2, 0.9, 0.2, 1) 1 forwards;
  animation-delay: var(--mm-delay, 0ms);
}

.model-map-dot {
  width: 10px;
  height: 10px;
  border-radius: 9999px;
  margin: 0 auto 8px auto;
  background: var(--mm-accent, rgba(255,255,255,0.75));
  box-shadow:
    0 0 0 5px rgba(255, 255, 255, 0.14),
    0 16px 48px rgba(0,0,0,0.35);
  animation: modelMapDotBreath 2.9s ease-in-out infinite;
  animation-delay: calc(var(--mm-delay, 0ms) + 520ms);
}

.model-map-chip {
  display: flex;
  align-items: center;
  gap: 8px;
  height: 34px;
  padding: 0 10px;
  border-radius: 9999px;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.14);
  color: rgba(255,255,255,0.86);
  box-shadow: 0 18px 60px rgba(0,0,0,0.36);
  max-width: min(240px, 42vw);
}

.model-map-icon {
  width: 14px;
  height: 14px;
  flex: 0 0 auto;
  color: var(--mm-accent, rgba(255,255,255,0.75));
  opacity: 0.95;
}

.model-map-type {
  font-size: 12px;
  font-weight: 900;
  color: var(--mm-accent, rgba(255,255,255,0.75));
  flex: 0 0 auto;
}

.model-map-sep {
  color: rgba(255,255,255,0.35);
  font-weight: 900;
  flex: 0 0 auto;
}

/* 模型名：强制单行，不越界；超长时横向滚动 */
.model-map-name {
  font-size: 12px;
  font-weight: 800;
  white-space: nowrap;
  overflow-x: auto;
  overflow-y: hidden;
  flex: 1 1 auto;
  min-width: 0;
  max-width: 180px;
  padding-bottom: 1px; /* 让滚动不挤压垂直对齐 */
  scrollbar-width: none; /* Firefox */
  -webkit-overflow-scrolling: touch;
  touch-action: pan-x;
}
.model-map-name::-webkit-scrollbar { height: 0; }

/* 角位坐标（相对正方形画布） */
.model-map-node.pos-top { top: 9%; left: 50%; }
.model-map-node.pos-top-right { top: 27%; left: 83%; }
.model-map-node.pos-bottom-right { top: 73%; left: 83%; }
.model-map-node.pos-bottom { top: 91%; left: 50%; }
.model-map-node.pos-bottom-left { top: 73%; left: 17%; }
.model-map-node.pos-top-left { top: 27%; left: 17%; }

/* chip 外扩：让 dot 锚点精确落在六芒星顶点上 */
.model-map-node.pos-bottom .model-map-dot { margin: 8px auto 0 auto; }
.model-map-node.pos-bottom .model-map-chip { order: -1; margin-bottom: 8px; }

.model-map-node.pos-top-left .model-map-anchor,
.model-map-node.pos-bottom-left .model-map-anchor { transform: translate(-50%, -50%) translateX(-10px); }
.model-map-node.pos-top-right .model-map-anchor,
.model-map-node.pos-bottom-right .model-map-anchor { transform: translate(-50%, -50%) translateX(10px); }

/* tone：用更“控色”的点亮方式，不做五角星那种显眼形状 */
.tone-gold { --mm-accent: rgba(250, 204, 21, 0.95); }
.tone-green { --mm-accent: rgba(34, 197, 94, 0.95); }
.tone-blue { --mm-accent: rgba(59, 130, 246, 0.95); }
.tone-purple { --mm-accent: rgba(168, 85, 247, 0.95); }
.tone-cyan { --mm-accent: rgba(34, 211, 238, 0.95); }
.tone-amber { --mm-accent: rgba(245, 158, 11, 0.95); }
.tone-muted { --mm-accent: rgba(255, 255, 255, 0.55); }

@media (prefers-reduced-motion: reduce) {
  .model-map-line,
  .model-map-anchor,
  .model-map-dot {
    animation: none !important;
    opacity: 1 !important;
    transform: translate(-50%, -50%) !important;
    stroke-dashoffset: 0 !important;
  }
}

/* Login（Grok-ish）：双栏 + 右侧黑洞场景 */
.prd-login-root {
  background: linear-gradient(135deg, var(--bg-base) 0%, #09090b 45%, var(--bg-elevated) 100%);
}

.prd-login-card {
  /* 登录窗：微磨砂玻璃，透而不虚 */
  background: linear-gradient(180deg, rgba(18, 18, 24, 0.82) 0%, rgba(14, 14, 20, 0.88) 100%);
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow:
    0 24px 90px rgba(0,0,0,0.55),
    0 1px 0 rgba(255,255,255,0.06) inset;
  backdrop-filter: blur(40px) saturate(160%);
}

.prd-login-leftGlow {
  background:
    radial-gradient(900px 640px at 50% 46%, rgba(99, 102, 241, 0.10) 0%, transparent 66%),
    radial-gradient(760px 520px at 55% 60%, rgba(124, 252, 0, 0.05) 0%, transparent 64%);
}

/* Recursive grid backdrop (ported from thirdparty/ref/递归网络.html) */
.prd-recgrid-stage {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
  background:
    radial-gradient(1000px 820px at 68% 52%, rgba(99, 102, 241, 0.06) 0%, transparent 64%),
    radial-gradient(900px 760px at 32% 56%, rgba(92, 134, 255, 0.05) 0%, transparent 68%),
    linear-gradient(180deg, #050507 0%, #07070a 55%, #050507 100%);
  /* defaults */
  --prd-recgrid-scale: 0.97;
  /* 注意：canvas 不支持 color-mix()，这里用可解析的 rgba，组件也可通过 prop 覆盖 */
  --prd-recgrid-stroke: rgba(165, 180, 252, 0.55);
}

.prd-recgrid-canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: block;
}

.prd-recgrid-vignette {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(closest-side at 50% 50%, rgba(0,0,0,0) 0%, rgba(0,0,0,0.32) 78%, rgba(0,0,0,0.72) 100%);
  opacity: 0.9;
}

@media (prefers-reduced-motion: reduce) {
  .prd-recgrid-canvas { opacity: 0.9; }
}

/* 视觉创作 Agent 标题呼吸动画 */
@keyframes visualAgentTitleBreath {
  0%, 100% {
    opacity: 1;
    filter: brightness(1);
  }
  50% {
    opacity: 0.85;
    filter: brightness(1.15);
  }
}

@media (prefers-reduced-motion: reduce) {
  .visual-agent-title-breath {
    animation: none !important;
  }
}

/* 缺陷提交按钮呼吸动画（侧边栏常驻按钮用） */
@keyframes defectSubmitBreath {
  0%, 100% {
    opacity: 0.4;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.08);
  }
}

.defect-submit-breath {
  animation: defectSubmitBreath 2.5s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .defect-submit-breath {
    animation: none !important;
    opacity: 0.6 !important;
  }
}

/* 缺陷提交按钮持续闪烁动画（生图失败时触发，持续闪烁直到用户点击） */
@keyframes defectSubmitFlash {
  0% {
    opacity: 1;
    transform: scale(1);
    color: rgba(239, 68, 68, 0.6);
    filter: drop-shadow(0 0 4px rgba(239, 68, 68, 0.4));
  }
  50% {
    opacity: 1;
    transform: scale(1.25);
    color: rgba(239, 68, 68, 1);
    filter: drop-shadow(0 0 12px rgba(239, 68, 68, 0.9));
  }
  100% {
    opacity: 1;
    transform: scale(1);
    color: rgba(239, 68, 68, 0.6);
    filter: drop-shadow(0 0 4px rgba(239, 68, 68, 0.4));
  }
}

.defect-submit-flash {
  animation: defectSubmitFlash 1.5s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .defect-submit-flash {
    animation: none !important;
    color: rgba(239, 68, 68, 0.8) !important;
  }
}

/* success.html 参考：三态按钮 + confetti（局部复用组件） */
@keyframes saLoading {
  0% { cy: 10; }
  25% { cy: 3; }
  50% { cy: 10; }
}

.sa-confetti-canvas {
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  /* 必须高于 Radix Dialog/Overlay（z=100/110），否则会被弹窗压到后面 */
  z-index: 9999;
}

.sa-btn {
  background: none;
  border: none;
  cursor: pointer;
  font-family: inherit;
  font-size: var(--sa-font, 12px);
  font-weight: 700;
  height: var(--sa-h, 30px);
  outline: none;
  overflow: hidden;
  padding: 0 var(--sa-px, 14px);
  position: relative;
  -webkit-tap-highlight-color: transparent;
  min-width: var(--sa-minw, 86px);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: width 220ms ease, transform 260ms cubic-bezier(0.2, 0.9, 0.2, 1);
}

.sa-btn.sa-breathe {
  animation: saPillBreath 320ms cubic-bezier(0.2, 0.9, 0.2, 1) 1;
}

@keyframes saPillBreath {
  0% { transform: scale(1); }
  45% { transform: scale(0.965); }
  100% { transform: scale(1); }
}

.sa-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: var(--sa-radius, 10px);
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.25) inset;
  transform: scaleX(1);
  transform-origin: 50% 50%;
  transition: transform 0.22s cubic-bezier(0.39, 1.86, 0.64, 1) 0.3s;
  z-index: 0;
}

.sa-sizer {
  position: absolute;
  left: -10000px;
  top: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  white-space: nowrap;
  visibility: hidden;
  pointer-events: none;
  user-select: none;
  box-sizing: border-box;
  padding: 0 var(--sa-px, 14px);
  height: var(--sa-h, 30px);
}

.sa-btn:hover::before {
  background: rgba(255,255,255,0.08);
  border-color: rgba(255,255,255,0.20);
}

.sa-message {
  left: 50%;
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  pointer-events: none;
  z-index: 1;
}

.sa-icon { color: rgba(92, 134, 255, 0.95); }
.sa-successIcon { color: rgba(92, 255, 161, 0.95); }

/* 默认全部隐藏，避免三层重叠 */
.sa-submitMessage,
.sa-loadingMessage,
.sa-successMessage {
  opacity: 0;
}

.sa-button-text span {
  opacity: 0;
  position: relative;
}

.sa-submitMessage .sa-button-text span {
  top: 8px;
  transition: all 0.2s ease var(--d);
}

.sa-submitMessage .sa-icon {
  opacity: 0;
  position: relative;
  top: 30px;
  transition: top 0.4s ease, opacity 0.3s linear;
}

.sa-loadingMessage { transition: opacity 0.3s linear 0.3s, top 0.4s cubic-bezier(0.22, 0, 0.41, -0.57); }

.sa-loadingSvg {
  fill: rgba(92, 134, 255, 0.95);
  width: 22px;
  height: 22px;
}

.sa-loadingText {
  color: rgba(255,255,255,0.78);
  font-weight: 800;
  font-size: inherit;
  letter-spacing: 0.01em;
}

.sa-cancelHint {
  color: rgba(255,255,255,0.55);
}

.sa-loadingCircle:nth-child(2) { animation-delay: 0.1s; }
.sa-loadingCircle:nth-child(3) { animation-delay: 0.2s; }

.sa-successMessage .sa-button-text span {
  left: 5px;
  transition: all 0.2s ease var(--dr);
}

.sa-ready .sa-submitMessage .sa-icon {
  opacity: 1;
  top: 0;
  transition: top 0.4s ease 600ms, opacity 0.3s linear 600ms;
}

.sa-ready .sa-submitMessage { opacity: 1; }

.sa-ready .sa-submitMessage .sa-button-text span {
  top: 0;
  opacity: 1;
  transition: all 0.2s ease calc(var(--dr) + 600ms);
}

.sa-loading::before {
  transition: transform 0.28s ease;
  transform: scaleX(0.92);
}

.sa-loading .sa-loadingMessage { opacity: 1; }
.sa-loading .sa-loadingCircle {
  animation-duration: 1s;
  animation-iteration-count: infinite;
  animation-name: saLoading;
  cy: 10;
}

.sa-complete .sa-submitMessage .sa-icon { top: -30px; transition: none; opacity: 0; }
.sa-complete .sa-submitMessage .sa-button-text span { top: -8px; transition: none; opacity: 0; }
.sa-complete .sa-loadingMessage { top: 80px; opacity: 0; }

.sa-complete .sa-successMessage { opacity: 1; }

.sa-complete .sa-successMessage .sa-button-text span {
  left: 0;
  opacity: 1;
  transition: all 0.2s ease calc(var(--d) + 1000ms);
}

@media (prefers-reduced-motion: reduce) {
  .sa-confetti-canvas { display: none; }
  .sa-btn::before { transition: none; }
  .sa-btn * { transition: none !important; animation: none !important; }
  .sa-button-text span { opacity: 1; top: 0 !important; left: 0 !important; }
  .sa-submitMessage .sa-icon { opacity: 1; top: 0; }
  .sa-loadingMessage { display: none; }
}

/* Lexical RichComposer 修复 */
.rich-composer-paragraph {
  /* 确保段落是块级元素 */
  display: block;
  /* 修复行尾光标定位问题 */
  min-height: 1.5em;
  /* 允许长单词换行 */
  word-break: break-word;
  /* 确保光标样式 */
  cursor: text;
  /* 移除 margin */
  margin: 0;
}

/* ========================================
   Landing Page Animations
   ======================================== */

/* Typewriter cursor blink */
@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

.animate-blink {
  animation: blink 1s step-end infinite;
}

/* Slow pulse for glow orbs */
@keyframes pulse-slow {
  0%, 100% { opacity: 0.4; transform: scale(1); }
  50% { opacity: 0.6; transform: scale(1.05); }
}

.animate-pulse-slow {
  animation: pulse-slow 4s ease-in-out infinite;
}

/* Scroll indicator animation */
@keyframes scroll-down {
  0% { transform: translateY(0); opacity: 1; }
  50% { transform: translateY(4px); opacity: 0.5; }
  100% { transform: translateY(0); opacity: 1; }
}

.animate-scroll-down {
  animation: scroll-down 1.5s ease-in-out infinite;
}

/* Gradient text shimmer effect */
@keyframes shimmer {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

.animate-shimmer {
  background-size: 200% auto;
  animation: shimmer 3s linear infinite;
}

/* Float animation for decorative elements */
@keyframes float {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-10px) rotate(1deg); }
  75% { transform: translateY(5px) rotate(-1deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

/* Fade in up animation */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fadeInUp 0.6s ease-out forwards;
}

/* Staggered fade in */
.animate-stagger-1 { animation-delay: 0.1s; }
.animate-stagger-2 { animation-delay: 0.2s; }
.animate-stagger-3 { animation-delay: 0.3s; }
.animate-stagger-4 { animation-delay: 0.4s; }

/* Glow pulse for CTA buttons */
@keyframes glow-pulse {
  0%, 100% {
    box-shadow: 0 0 40px rgba(99, 102, 241, 0.3), 0 8px 32px rgba(0,0,0,0.4);
  }
  50% {
    box-shadow: 0 0 60px rgba(99, 102, 241, 0.5), 0 8px 32px rgba(0,0,0,0.4);
  }
}

.animate-glow-pulse {
  animation: glow-pulse 2s ease-in-out infinite;
}

/* Rotate animation for decorative elements */
@keyframes spin-slow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.animate-spin-slow {
  animation: spin-slow 20s linear infinite;
}

/* Line draw animation */
@keyframes line-draw {
  from { stroke-dashoffset: 1000; }
  to { stroke-dashoffset: 0; }
}

.animate-line-draw {
  stroke-dasharray: 1000;
  animation: line-draw 2s ease-out forwards;
}

/* ═══════════════════════════════════════════════════════════
   Surface System — Single Source of Truth for Card/Panel Surfaces

   目的：统一全应用的卡片/面板视觉样式，消除内联样式碎片化问题。
   所有 surface 类使用 tokens.css 中的 CSS 变量
   (--glass-bg-start, --glass-bg-end, --glass-border)，
   质量/性能模式通过变量值自动切换。

   类名            用途                             blur  shadow  hover
   ─────────────  ─────────────────────────────────  ────  ──────  ─────
   .surface       主级卡片容器                       ✓     中      —
   .surface-raised 突出展示卡片（KPI、Hero）          ✓     强      —
   .surface-inset  嵌套内面板（card 内二级分区）      —     内陷    —
   .surface-row    列表/表格行                        —     —      背景+微影
   .surface-interactive  可点击卡片                   —     —      上浮+光晕

   用法:
     <div className="surface rounded-[16px] p-4">       主容器
     <div className="surface-inset rounded-lg p-3">     嵌套面板
     <div className="surface-row px-4 py-2">            列表行
   ═══════════════════════════════════════════════════════════ */

/* ── .surface — 主级卡片 ── */
.surface {
  position: relative;
  border: 1px solid var(--glass-border);
  box-shadow:
    0 2px 16px -4px rgba(0, 0, 0, 0.35),
    inset 0 1px 0 0 rgba(255, 255, 255, 0.06);
  isolation: isolate;
}
.surface::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  z-index: -1;
  background: linear-gradient(180deg, var(--glass-bg-start) 0%, var(--glass-bg-end) 100%);
  backdrop-filter: blur(40px) saturate(180%) brightness(1.1);
  -webkit-backdrop-filter: blur(40px) saturate(180%) brightness(1.1);
  pointer-events: none;
}

/* ── .surface-raised — 突出卡片（更深阴影 + 更亮内光） ── */
.surface-raised {
  position: relative;
  border: 1px solid var(--glass-border);
  box-shadow:
    0 8px 32px -4px rgba(0, 0, 0, 0.4),
    0 4px 16px -2px rgba(0, 0, 0, 0.25),
    inset 0 1px 0 0 rgba(255, 255, 255, 0.08),
    inset 0 -1px 0 0 rgba(0, 0, 0, 0.12);
  isolation: isolate;
}
.surface-raised::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  z-index: -1;
  background: linear-gradient(180deg, var(--glass-bg-start) 0%, var(--glass-bg-end) 100%);
  backdrop-filter: blur(40px) saturate(180%) brightness(1.1);
  -webkit-backdrop-filter: blur(40px) saturate(180%) brightness(1.1);
  pointer-events: none;
}

/*
 * ── .glass-blur-pseudo — GlassCard 质量模式伪元素 blur 层 ──
 *
 * macOS 合成器接缝修复：当多个 backdrop-filter 元素在 grid 中相邻时，
 * macOS 合成器在行边界处产生可见接缝线（Windows 无此问题）。
 * 将 blur + background 移至 ::before 伪元素，使每个 blur 层独立合成，
 * 消除元素间 blur 区域的合成冲突。
 *
 * GlassCard 通过 CSS 自定义属性 --_gbl (blur) 和 --_gbg (background)
 * 传递动态值给伪元素。
 */
.glass-blur-pseudo::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  z-index: -1;
  backdrop-filter: var(--_gbl);
  -webkit-backdrop-filter: var(--_gbl);
  background: var(--_gbg);
  pointer-events: none;
}

/* ── .surface-inset — 嵌套面板（card 内的二级分区，无 blur） ── */
.surface-inset {
  background: var(--bg-card, rgba(255, 255, 255, 0.03));
  border: 1px solid var(--border-subtle, rgba(255, 255, 255, 0.08));
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.12);
}

/* ── .surface-row — 列表/表格行悬停 ── */
.surface-row {
  transition: background 0.2s ease,
              box-shadow 0.25s ease;
}

.surface-row:hover {
  background: var(--bg-card-hover, rgba(255, 255, 255, 0.05)) !important;
  box-shadow:
    0 2px 12px -4px rgba(0, 0, 0, 0.25),
    inset 0 1px 0 0 rgba(255, 255, 255, 0.04);
}

/* ── .surface-interactive — 可点击卡片（上浮 + 光晕） ── */
.surface-interactive {
  transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1),
              border-color 0.25s ease,
              box-shadow 0.3s ease;
}

.surface-interactive:hover {
  transform: translateY(-3px);
  border-color: var(--card-accent-border, rgba(255, 255, 255, 0.15)) !important;
  box-shadow:
    0 12px 40px -12px var(--card-accent-glow, rgba(0, 0, 0, 0.5)),
    0 4px 16px -4px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 0 rgba(255, 255, 255, 0.08) !important;
}

.surface-interactive:active {
  transform: translateY(-1px);
  transition-duration: 0.1s;
}

/* ── .glass-card-interactive — GlassCard 组件专用 (保留兼容) ── */
.glass-card-interactive {
  transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1),
              border-color 0.25s ease,
              box-shadow 0.3s ease !important;
}

.glass-card-interactive:hover {
  transform: translateY(-3px);
  border-color: var(--card-accent-border, rgba(255, 255, 255, 0.15)) !important;
  box-shadow:
    0 12px 40px -12px var(--card-accent-glow, rgba(0, 0, 0, 0.5)),
    0 4px 16px -4px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 0 rgba(255, 255, 255, 0.08) !important;
}

.glass-card-interactive:active {
  transform: translateY(-1px);
  transition-duration: 0.1s;
}

/* ========================================
   Performance Mode — Obsidian 实底暗色风格

   Windows 平台 backdrop-filter 使用 CPU 光栅化（非 GPU），
   blur(40px) + saturate + brightness 组合极度消耗性能。

   设计理念：不是"降级的玻璃"，而是完全不同的「Obsidian」视觉风格 —
   用实底暗色表面 + 精致边框 + 干净阴影替代模糊玻璃，
   类似 Linear / Notion / Vercel Dashboard 的现代暗色 UI。

   CSS 变量已在 themeComputed.ts 中按性能模式切换为实底值，
   此处仅需清除 backdrop-filter 并微调视觉细节。
   ======================================== */

/* 核心：彻底清除所有 backdrop-filter（inline、CSS、伪元素均覆盖） */
html[data-perf-mode="performance"] * {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}
html[data-perf-mode="performance"] *::before,
html[data-perf-mode="performance"] *::after {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* 减少过渡持续时间，让操作更干脆 */
html[data-perf-mode="performance"] .transition-all {
  transition-duration: 120ms !important;
}

/* 减少合成层数量 */
html[data-perf-mode="performance"] [style*="will-change"] {
  will-change: auto !important;
}

/* ReactBits 组件：性能模式下简化动画 */
html[data-perf-mode="performance"] .blur-text span {
  filter: none !important;
  opacity: 1 !important;
  transform: none !important;
  transition: none !important;
}

/* 尊重系统级别的减少动画偏好 */
@media (prefers-reduced-motion: reduce) {
  * {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}

/* ========================================
   移动端适配动画 & 工具类
   ======================================== */

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

@keyframes slideInLeft {
  from { transform: translateX(-100%); }
  to { transform: translateX(0); }
}

@keyframes slideInRight {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

/* Dialog 居中动画 (已有的 prd-dialog-content 不带动画时的兜底) */
.prd-dialog-content {
  transform: translate(-50%, -50%);
}

.prd-dialog-overlay {
  animation: fadeIn 150ms ease-out;
}

/* 移动端 hover 替代: 触控设备上始终显示原本 hover 才可见的操作按钮 */
@media (hover: none) and (pointer: coarse) {
  .mobile-show-actions {
    opacity: 1 !important;
    pointer-events: auto !important;
  }
  /* 触控设备上确保卡片内操作按钮有足够的可点击面积 (≥36px) */
  .mobile-show-actions button,
  .mobile-show-actions [role="button"] {
    min-height: 36px;
    min-width: 36px;
  }
}

/* ========================================
   React Flow (Workflow Canvas) — 暗色覆盖
   ======================================== */

.workflow-canvas .react-flow__node {
  cursor: grab;
}

.workflow-canvas .react-flow__node:active {
  cursor: grabbing;
}

/* 连线吸附时端口高亮 */
.workflow-canvas .react-flow__handle.connecting {
  background: rgba(59, 130, 246, 0.6) !important;
  border-color: rgba(59, 130, 246, 0.8) !important;
  box-shadow: 0 0 8px rgba(59, 130, 246, 0.4);
}

/* 选中节点环 */
.workflow-canvas .react-flow__node.selected .react-flow__handle {
  border-color: rgba(99, 102, 241, 0.5) !important;
}

/* 控件面板暗色 */
.workflow-canvas .react-flow__controls button {
  background: rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.7);
  width: 28px;
  height: 28px;
}

.workflow-canvas .react-flow__controls button:hover {
  background: rgba(255, 255, 255, 0.08);
  color: rgba(255, 255, 255, 0.9);
}

.workflow-canvas .react-flow__controls button svg {
  fill: currentColor;
}

/* 选区框 */
.workflow-canvas .react-flow__selection {
  background: rgba(59, 130, 246, 0.06);
  border: 1px solid rgba(59, 130, 246, 0.25);
}

/* 小地图节点 */
.workflow-canvas .react-flow__minimap-node {
  fill: rgba(255, 255, 255, 0.08);
  stroke: rgba(255, 255, 255, 0.15);
  stroke-width: 1;
  rx: 4;
}

/* 连线路径动画 */
.workflow-canvas .react-flow__edge.animated path {
  stroke-dasharray: 5;
  animation: wfEdgeDash 0.5s linear infinite;
}

@keyframes wfEdgeDash {
  to { stroke-dashoffset: -10; }
}

@media (prefers-reduced-motion: reduce) {
  .workflow-canvas .react-flow__edge.animated path {
    animation: none !important;
  }
}

/* ========================================
   Arena Markdown — 竞技场面板内 Markdown 渲染
   ======================================== */

.arena-markdown p { margin: 0.5em 0; }
.arena-markdown p:first-child { margin-top: 0; }
.arena-markdown p:last-child { margin-bottom: 0; }
.arena-markdown h1, .arena-markdown h2, .arena-markdown h3,
.arena-markdown h4, .arena-markdown h5, .arena-markdown h6 {
  font-weight: 700;
  margin: 1em 0 0.5em;
  line-height: 1.4;
  color: var(--text-primary);
}
.arena-markdown h1 { font-size: 1.3em; }
.arena-markdown h2 { font-size: 1.15em; }
.arena-markdown h3 { font-size: 1.05em; }
.arena-markdown ul, .arena-markdown ol { margin: 0.5em 0; padding-left: 1.5em; }
.arena-markdown li { margin: 0.25em 0; }
.arena-markdown code {
  font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
  font-size: 0.88em;
  padding: 0.15em 0.4em;
  border-radius: 4px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.08);
}
.arena-markdown pre {
  margin: 0.75em 0;
  padding: 0.75em 1em;
  border-radius: 8px;
  background: rgba(0,0,0,0.3);
  border: 1px solid rgba(255,255,255,0.06);
  overflow-x: auto;
}
.arena-markdown pre code {
  padding: 0;
  border: none;
  background: none;
  font-size: 0.85em;
}
.arena-markdown blockquote {
  margin: 0.5em 0;
  padding: 0.5em 1em;
  border-left: 3px solid rgba(255,255,255,0.15);
  color: var(--text-muted);
}
.arena-markdown table {
  border-collapse: collapse;
  margin: 0.5em 0;
  width: 100%;
}
.arena-markdown th, .arena-markdown td {
  padding: 0.4em 0.75em;
  border: 1px solid rgba(255,255,255,0.08);
  text-align: left;
}
.arena-markdown th {
  background: rgba(255,255,255,0.04);
  font-weight: 600;
}
.arena-markdown hr {
  border: none;
  border-top: 1px solid rgba(255,255,255,0.08);
  margin: 1em 0;
}
.arena-markdown a {
  color: rgba(99, 102, 241, 0.9);
  text-decoration: underline;
  text-underline-offset: 2px;
}
.arena-markdown strong { font-weight: 700; }

/* ── AI-Native UI: Chat Page Styles ───────────────────────────────── */

/* Typing indicator: 3-dot pulse */
.ai-typing-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #818CF8;
  animation: ai-dot-pulse 1.4s ease-in-out infinite;
}

@keyframes ai-dot-pulse {
  0%, 80%, 100% { opacity: 0.25; transform: scale(0.8); }
  40% { opacity: 1; transform: scale(1); }
}

/* Chat card subtle border glow on focus-within */
.ai-chat-card:focus-within {
  border-color: rgba(99, 102, 241, 0.25) !important;
}

/* Chat input focus ring */
.ai-chat-card textarea:focus {
  border-color: rgba(99, 102, 241, 0.40) !important;
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.08);
}

@media (prefers-reduced-motion: reduce) {
  .ai-typing-dot { animation: none; opacity: 0.6; }
}
